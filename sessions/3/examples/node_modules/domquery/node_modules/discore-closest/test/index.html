<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf8">
    <title>closest</title>
    <script src="../build/build.js"></script>
  </head>
  <body>
    <div id="d1">
      <div id="d2">
        <div id="d3">
        </div>
      </div>
    </div>
    <script>
      var closest = require('closest')
      var d1 = document.querySelector('#d1')
      var d2 = document.querySelector('#d2')
      var d3 = document.querySelector('#d3')
      var d4 = document.querySelector('#d3').cloneNode(true);

      assert(closest(d3, '#d2'), d2)
      assert(closest(d3, '#d3'), undefined)
      assert(closest(d3, '#d3', true), d3)
      assert(closest(d3, '#d1'), d1)
      assert(closest(d3, '#d1', null, d2), undefined)
      assert(closest(d3, '#d1', null, d1), d1)
      assert(closest(d4, 'body'), undefined)
      assert(closest(document.documentElement, '*'), undefined);

      alert('ok')

      function assert(el1, el2) {
        if (el1 !== el2)
          alert(new Error().stack)
      }
    </script>
  </body>
</html>